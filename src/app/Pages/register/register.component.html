<section
  class="flex justify-center items-center bg-gradient-to-b from-white via-gray-50 to-green-50 pb-10 px-4"
>
  <div
    class="w-full md:max-w-[75%] lg:max-w-[90%] bg-white border border-green-100 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 p-8"
  >
    <h2
      class="text-3xl font-bold text-gray-700 mb-8 text-center relative inline-block pb-2 after:content-[''] after:absolute after:w-full after:h-[3px] after:bg-green-500 after:bottom-0 after:left-1/2 after:-translate-x-1/2"
    >
      {{ 'REGISTER.TITLE' | translate }}
    </h2>

    <form [formGroup]="registerForm" (ngSubmit)="submitForm()" class="space-y-5">
      <!-- ================= NAME ================= -->
      <div>
        <label for="name" class="block text-gray-700 font-medium mb-1">
          {{ 'REGISTER.NAME_LABEL' | translate }}
        </label>
        <input
          id="name"
          type="text"
          formControlName="name"
          [placeholder]="'REGISTER.NAME_PLACEHOLDER' | translate"
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition"
        />

        @if (registerForm.get('name')?.touched && registerForm.get('name')?.invalid) {
          <div class="flex p-4 mt-3 text-sm text-red-800 rounded-lg bg-red-50" role="alert">
            <ul class="list-disc list-inside">
              @if (registerForm.get('name')?.errors?.['required']) {
                <li>{{ 'REGISTER.NAME_REQUIRED' | translate }}</li>
              }
              @if (registerForm.get('name')?.errors?.['minlength']) {
                <li>{{ 'REGISTER.NAME_MIN' | translate }}</li>
              }
              @if (registerForm.get('name')?.errors?.['maxlength']) {
                <li>{{ 'REGISTER.NAME_MAX' | translate }}</li>
              }
            </ul>
          </div>
        }
      </div>

      <!-- ================= EMAIL ================= -->
      <div>
        <label for="email" class="block text-gray-700 font-medium mb-1">
          {{ 'REGISTER.EMAIL_LABEL' | translate }}
        </label>
        <input
          id="email"
          type="email"
          formControlName="email"
          [placeholder]="'REGISTER.EMAIL_PLACEHOLDER' | translate"
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition"
        />

        @if (registerForm.get('email')?.touched && registerForm.get('email')?.invalid) {
          <div class="flex p-4 mt-3 text-sm text-red-800 rounded-lg bg-red-50" role="alert">
            <ul class="list-disc list-inside">
              @if (registerForm.get('email')?.errors?.['required']) {
                <li>{{ 'REGISTER.EMAIL_REQUIRED' | translate }}</li>
              }
              @if (registerForm.get('email')?.errors?.['email']) {
                <li>{{ 'REGISTER.EMAIL_INVALID' | translate }}</li>
              }
            </ul>
          </div>
        }
      </div>

      <!-- ================= PASSWORD ================= -->
      <div class="relative flex flex-col">
        <label for="password" class="block text-gray-700 font-medium mb-1">
          {{ 'REGISTER.PASSWORD_LABEL' | translate }}
        </label>

        <div class="relative flex items-center">
          <input
            id="password"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            [placeholder]="'REGISTER.PASSWORD_PLACEHOLDER' | translate"
            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition pr-12"
          />

          <button
            type="button"
            (click)="togglePassword()"
            class="absolute right-4 flex items-center justify-center h-full text-gray-500 hover:text-green-600 transition"
          >
            <i [ngClass]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>
        </div>

        @if (registerForm.get('password')?.touched && registerForm.get('password')?.invalid) {
          <div class="flex p-4 mt-3 text-sm text-red-800 rounded-lg bg-red-50" role="alert">
            <ul class="list-disc list-inside">
              @if (registerForm.get('password')?.errors?.['required']) {
                <li>{{ 'REGISTER.PASSWORD_REQUIRED' | translate }}</li>
              }
              @if (registerForm.get('password')?.errors?.['pattern']) {
                <li>{{ 'REGISTER.PASSWORD_PATTERN' | translate }}</li>
              }
            </ul>
          </div>
        }
      </div>

      <!-- ================= RE-PASSWORD ================= -->
      <div class="relative flex flex-col">
        <label for="rePassword" class="block text-gray-700 font-medium mb-1">
          {{ 'REGISTER.CONFIRM_LABEL' | translate }}
        </label>

        <div class="relative flex items-center">
          <input
            id="rePassword"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="rePassword"
            [placeholder]="'REGISTER.CONFIRM_PLACEHOLDER' | translate"
            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition pr-12"
          />

          <button
            type="button"
            (click)="togglePassword()"
            class="absolute right-4 flex items-center justify-center h-full text-gray-500 hover:text-green-600 transition"
          >
            <i [ngClass]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>
        </div>

        @if (registerForm.get('rePassword')?.touched && (registerForm.get('rePassword')?.invalid || registerForm.hasError('mismatch'))) {
          <div class="flex p-4 mt-3 text-sm text-red-800 rounded-lg bg-red-50" role="alert">
            <ul class="list-disc list-inside">
              @if (registerForm.get('rePassword')?.errors?.['required']) {
                <li>{{ 'REGISTER.CONFIRM_REQUIRED' | translate }}</li>
              }
              @if (registerForm.hasError('mismatch')) {
                <li>{{ 'REGISTER.CONFIRM_MISMATCH' | translate }}</li>
              }
            </ul>
          </div>
        }
      </div>

      <!-- ================= PHONE ================= -->
      <div>
        <label for="phone" class="block text-gray-700 font-medium mb-1">
          {{ 'REGISTER.PHONE_LABEL' | translate }}
        </label>
        <input
          id="phone"
          type="tel"
          formControlName="phone"
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition"
        />

        @if (registerForm.get('phone')?.touched && registerForm.get('phone')?.invalid) {
          <div class="flex p-4 mt-3 text-sm text-red-800 rounded-lg bg-red-50" role="alert">
            <ul class="list-disc list-inside">
              @if (registerForm.get('phone')?.errors?.['required']) {
                <li>{{ 'REGISTER.PHONE_REQUIRED' | translate }}</li>
              }
              @if (registerForm.get('phone')?.errors?.['pattern']) {
                <li>{{ 'REGISTER.PHONE_INVALID' | translate }}</li>
              }
            </ul>
          </div>
        }
      </div>

      <!-- ================= SUBMIT BUTTON ================= -->
      <button
        type="submit"
        class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-3 rounded-xl shadow-md hover:shadow-xl transition-all duration-500 disabled:opacity-50"
        [disabled]="registerForm.invalid || isLoading"
      >
        <i class="fas fa-user-plus mr-2"></i>
        {{ 'REGISTER.BUTTON' | translate }}

        @if (isLoading) {
          <span class="ms-3"><i class="fas fa-spin fa-spinner"></i></span>
        }
      </button>

      @if (errorMsg) {
        <div class="flex p-4 mt-3 text-sm text-red-800 rounded-lg bg-red-50" role="alert">
          <ul class="list-disc list-inside">
            <li>{{ errorMsg }}</li>
          </ul>
        </div>
      }

      @if (isSuccess) {
        <div class="flex p-4 mt-3 text-sm text-green-800 rounded-lg bg-green-50" role="alert">
          <ul class="list-disc list-inside">
            <li>{{ isSuccess }}</li>
          </ul>
        </div>
      }
    </form>

    <p class="text-center text-gray-500 mt-6">
      {{ 'REGISTER.HAVE_ACCOUNT' | translate }}
      <a routerLink="/login" class="text-green-600 font-medium hover:underline">
        {{ 'REGISTER.LOGIN_LINK' | translate }}
      </a>
    </p>
  </div>
</section>
